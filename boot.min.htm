<!DOCTYPE html><html lang='en'><head><title>Bootstrap</title></head><body><h1>Bootstrap</h1><table><tr><td rowspan='2'><button id='startIt'>start it..</button></td><td><progress id='bar'value='0'max='1'></progress></td></tr><tr><td id='info'>&nbsp;</td></tr></table><script>var theRoot="https://homeding.github.io/",bObj=document.querySelector("#startIt"),theBar=document.querySelector("#bar"),theInfo=document.querySelector("#info"),work={status:"start",list:null,files:0,done:0},stepTimer=0;function logText(t){theInfo.innerText=t}function doStart(){work.status="wait";var o=new XMLHttpRequest;o.open("GET",theRoot+"list.txt",!0),o.responseType="text",o.onload=function(t){var e=o.responseText.replace(/\r?\n/g,";");e=e.replace(/;$/,""),work.list=e.split(";"),work.files=work.list.length,work.status="run"},o.send(null)}function doFile(){work.status="wait";var n=work.list.shift();work.done++,theBar.max=work.files,theBar.value=work.done;var s=new XMLHttpRequest;s.open("GET",theRoot+n,!0),s.responseType="arraybuffer",s.onerror=function(t){logText(n+": error: failed."),work.status="run"},s.onload=function(t){if(200!=s.status)logText(n+": error: "+s.status);else{var e=s.response;if(e){var o=new FormData;o.append("file",new Blob([e]),"/"+n);var r=new XMLHttpRequest;r.addEventListener("readystatechange",function(t){4==r.readyState&&200<=r.status&&r.status<300&&logText(n+"("+e.byteLength+")")}),r.open("POST","/"),r.send(o)}}work.status=0==work.list.length?"end":"run"},s.send(null),0==work.list.length&&(work.status="end")}function step(){"start"==work.status?doStart():"run"==work.status?doFile():"end"==work.status&&(stepTimer&&(window.clearInterval(stepTimer),logText("done"),window.location.href="/"),stepTimer=0)}location.hash?theRoot+=location.hash.substr(1)+"/":theRoot+="v01/",bObj.addEventListener("click",function(){stepTimer=window.setInterval(step,330)})</script></body></html>