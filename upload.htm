<!doctype html>
<html lang='en'>

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>File Upload</title>
</head>

<body>
  <h1>File Upload</h1>
  <div id='zone' style='width:9em;height:6em;padding:1em;background-color:#ddd'>Drop here</div>
  <a href='#i'>I-Upload</a>
  <script>
    // allow drag&drop of file objects 
    function dragHelper(e) {
      e.stopPropagation();
      e.preventDefault();
    }

    // allow drag&drop of file objects 
    function dropped(e) {
      dragHelper(e);
      var fls = e.dataTransfer.files;
      var formData = new FormData();
      var r = '/' + (location.hash ? location.hash.substr(1) + '/' : '')
      for (var i = 0; i < fls.length; i++) {
        formData.append('file', fls[i], r + fls[i].name);
      }
      var xmlHttp = new XMLHttpRequest();
      xmlHttp.addEventListener('readystatechange', function (p) {
        if ((xmlHttp.readyState == 4) && (xmlHttp.status >= 200) && (xmlHttp.status < 300)) {
          window.alert('done.');
        }
      });
      xmlHttp.open('POST', '/');
      xmlHttp.send(formData);
    }
    var zoneObj = document.getElementById('zone');
    zoneObj.addEventListener('dragenter', dragHelper, false);
    zoneObj.addEventListener('dragover', dragHelper, false);
    zoneObj.addEventListener('drop', dropped, false);
  </script>
</body>